"use strict";(self.webpackChunkmyproject=self.webpackChunkmyproject||[]).push([[362],{362:function(e,t,n){n.r(t),n.d(t,{default:function(){return W}});var o=n(165),s=n(861),a=n(439),r="NewTodo_newTodo__container__kikHj",c="NewTodo_form__lt8p4",i="NewTodo_form__icon__container__fs59C",d="NewTodo_form__input__WQ5-i",u="NewTodo_form__important__p-8hH",l="NewTodo_form__button_submit__Jq5UG",_=n(791),p="Card_card__W2sh9",h=n(184),f=function(e){return(0,h.jsx)("div",{className:p,children:e.children})},v=n(434),m=n(505),x=n(885),g=n(243),j=function(e){return function(){var t=(0,s.Z)((0,o.Z)().mark((function t(n){var s,a,r,c;return(0,o.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s=e.token,a=e.userId,t.prev=1,n(x.A.setIsLoading(!0)),t.next=5,g.Z.get("https://todoapp-backend-gx49.onrender.com/"+"api/todos/".concat(a),{headers:{Authorization:"Bearer ".concat(s)}});case 5:r=t.sent,c=r.data.todos,n(m.M.fetch(c)),n(x.A.setIsLoading(!1)),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(1),n(x.A.showNotification({title:t.t0.message,message:t.t0.response.data.message,status:"error"}));case 14:case"end":return t.stop()}}),t,null,[[1,11]])})));return function(e){return t.apply(this,arguments)}}()},k=function(e){return function(){var t=(0,s.Z)((0,o.Z)().mark((function t(n){var s,a,r,c,i,d;return(0,o.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s=e.todo,a=e.important,r=e.token,t.prev=1,n(x.A.setIsLoading(!0)),t.next=5,g.Z.post("https://todoapp-backend-gx49.onrender.com/api/todos",{todo:s,important:a},{headers:{Authorization:"Bearer ".concat(r)}});case 5:c=t.sent,i=c.data.todo,d={key:i._id,todo:i.todo,important:i.important,creator:i.creator,id:i._id},n(m.M.add(d)),n(x.A.setIsLoading(!1)),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(1),n(x.A.showNotification({title:t.t0.message,message:t.t0.response.data.message,status:"error"}));case 15:case"end":return t.stop()}}),t,null,[[1,12]])})));return function(e){return t.apply(this,arguments)}}()},N="Todos_container__todos__moyE0",I="Todos_h1__ujIgV",b={isUpdateOff__container:"TodoItem_isUpdateOff__container__TNfW7",isUpdateOff__todo:"TodoItem_isUpdateOff__todo__A84m5",isUpdateOff__todo_checked:"TodoItem_isUpdateOff__todo_checked__0hHYa",isUpdateOn__container:"TodoItem_isUpdateOn__container__XCmtO",isUpdateOn__input:"TodoItem_isUpdateOn__input__onYDz",isUpdateOn__button_edit:"TodoItem_isUpdateOn__button_edit__nOXmj",isUpdateOn__button_cancel:"TodoItem_isUpdateOn__button_cancel__Z0cmi"},w="EditIcon_label__p6l4t",U="EditIcon_editIcon__4kebv",O=function(e){return(0,h.jsx)("label",{onClick:e.updateHandler,className:w,children:(0,h.jsxs)("svg",{xmlns:"../../img/sprite.svg#icon-edit.svg",viewBox:"0 0 32 32",className:U,children:[(0,h.jsx)("title",{children:"Update"}),(0,h.jsx)("path",{d:"M27 0c2.761 0 5 2.239 5 5 0 1.126-0.372 2.164-1 3l-2 2-7-7 2-2c0.836-0.628 1.874-1 3-1zM2  23l-2 9 9-2 18.5-18.5-7-7-18.5 18.5zM22.362 11.362l-14 14-1.724-1.724 14-14 1.724 1.724z"})]})})},T="DeleteIcon_label__u-AB8",Z="DeleteIcon_deleteIcon__Tx2Va",C=function(e){return(0,h.jsx)("label",{onClick:e.deleteHandler,className:T,children:(0,h.jsxs)("svg",{xmlns:"../../img/sprite.svg#icon-delete.svg",className:Z,viewBox:"0 0 32 32",children:[(0,h.jsx)("title",{children:"Delete"}),(0,h.jsx)("path",{d:"M4 10v20c0 1.1 0.9 2 2 2h18c1.1 0 2-0.9 2-2v-20h-22zM10  28h-2v-14h2v14zM14 28h-2v-14h2v14zM18 28h-2v-14h2v14zM22 28h-2v-14h2v14z"}),(0,h.jsx)("path",{d:"M26.5 4h-6.5v-2.5c0-0.825-0.675-1.5-1.5-1.5h-7c-0.825 0-1.5 0.675-1.5  1.5v2.5h-6.5c-0.825 0-1.5 0.675-1.5 1.5v2.5h26v-2.5c0-0.825-0.675-1.5-1.5-1.5zM18 4h-6v-1.975h6v1.975z"})]})})},M="FlagIcon_div__TPH1i",z="FlagIcon_flagIcon__4S4I9",A="FlagIcon_flagColored__xGTaJ",B="FlagIcon_isNotButton__HyO3l",y="FlagIcon_isNotButtonInvis__rfXqn",L=function(e){var t="".concat(z);return e.flagColor&&(t="".concat(A)),!0===e.isNotButton&&(t="".concat(B)),!0===e.isNotButtonInvis&&(t="".concat(y)),(0,h.jsxs)("div",{className:M,children:[!e.isNotButton&&(0,h.jsx)("label",{htmlFor:"important",children:(0,h.jsxs)("svg",{xmlns:"../../img/sprite.svg#icon-flag.svg",viewBox:"0 0 32 32",className:"".concat(t),children:[(0,h.jsx)("title",{children:"Mark as important"}),(0,h.jsx)("path",{d:"M0 0h4v32h-4v-32z"}),(0,h.jsx)("path",{d:"M26 20.094c2.582 0 4.83-0.625 6-1.547v-16c-1.17 0.922-3.418 1.547-6 1.547s-4.83-0.625-6-1.547v16c1.17 0.922 3.418 1.547 6 1.547z"}),(0,h.jsx)("path",{d:"M19 1.016c-1.466-0.623-3.61-1.016-6-1.016-3.012 0-5.635 0.625-7 1.547v16c1.365-0.922 3.988-1.547 7-1.547 2.39 0 4.534 0.393 6 1.016v-16z"})]})}),e.isNotButton&&(0,h.jsxs)("svg",{xmlns:"../../img/sprite.svg#icon-flag.svg",viewBox:"0 0 32 32",className:"".concat(t),children:[(0,h.jsx)("title",{children:"important"}),(0,h.jsx)("path",{d:"M0 0h4v32h-4v-32z"}),(0,h.jsx)("path",{d:"M26 20.094c2.582 0 4.83-0.625 6-1.547v-16c-1.17 0.922-3.418 1.547-6 1.547s-4.83-0.625-6-1.547v16c1.17 0.922 3.418 1.547 6 1.547z"}),(0,h.jsx)("path",{d:"M19 1.016c-1.466-0.623-3.61-1.016-6-1.016-3.012 0-5.635 0.625-7 1.547v16c1.365-0.922 3.988-1.547 7-1.547 2.39 0 4.534 0.393 6 1.016v-16z"})]})]})},H="CheckBoxU_label__f+j74",D="CheckBoxU_editIcon__V+se4",S="CheckBoxU_editIconChecked__+x+vr",F=function(e){var t;return e.isChecked||(t=(0,h.jsx)("svg",{xmlns:"../../img/sprite.svg#icon-checkbox-unchecked.svg",viewBox:"0 0 32 32",className:D,children:(0,h.jsx)("path",{d:"M28 0h-24c-2.2 0-4 1.8-4 4v24c0 2.2 1.8 4 4 4h24c2.2 0 4-1.8 4-4v-24c0-2.2-1.8-4-4-4zM28 28h-24v-24h24v24z"})})),e.isChecked&&(t=(0,h.jsxs)("svg",{xmlns:"../../img/sprite.svg#icon-checkbox-checked.svg",viewBox:"0 0 32 32",className:S,children:[(0,h.jsx)("title",{children:"Mark as unchecked"}),(0,h.jsx)("path",{d:"M28 0h-24c-2.2 0-4 1.8-4 4v24c0 2.2 1.8 4 4 4h24c2.2 0 4-1.8 4-4v-24c0-2.2-1.8-4-4-4zM14  24.828l-7.414-7.414 2.828-2.828 4.586 4.586 9.586-9.586 2.828 2.828-12.414 12.414z"})]})),(0,h.jsx)("label",{onClick:e.onCheck,className:H,children:t})},R=function(e){var t,n=(0,v.v9)((function(e){return e.user.token})),r=(0,v.I0)(),c=(0,_.useState)(!1),i=(0,a.Z)(c,2),d=i[0],u=i[1],l=(0,_.useState)(!1),p=(0,a.Z)(l,2),j=p[0],k=p[1],N=(0,_.useState)(!1),I=(0,a.Z)(N,2),w=I[0],U=I[1],T=(0,_.useRef)();return t="".concat(w?b.isUpdateOff__todo_checked:b.isUpdateOff__todo),(0,h.jsxs)(f,{children:[!d&&(0,h.jsxs)("div",{className:b.isUpdateOff__container,children:[(0,h.jsx)(F,{onCheck:function(){U((function(e){return!w}))},isChecked:w}),e.important&&(0,h.jsx)(L,{isNotButton:!0}),!e.important&&(0,h.jsx)(L,{isNotButtonInvis:!0}),(0,h.jsx)("h1",{className:t,children:e.todo}),(0,h.jsx)(O,{updateHandler:function(){u(!0)},className:b.isUpdateOff__button_edit}),(0,h.jsx)(C,{deleteHandler:e.onRemoveTodo,className:b.isUpdateOff__button_delete})]}),d&&(0,h.jsxs)("form",{onSubmit:function(t){if(t.preventDefault(),""!==T.current.value){var a={token:n,todoId:e.id,updatedTodo:T.current.value};r(function(e){return function(){var t=(0,s.Z)((0,o.Z)().mark((function t(n){var s,a,r;return(0,o.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s=e.todoId,a=e.updatedTodo,r=e.token,t.prev=1,n(x.A.setIsLoading(!0)),t.next=5,g.Z.patch("https://todoapp-backend-gx49.onrender.com/"+"api/todos/".concat(s),{todoId:s,updatedTodo:a},{headers:{Authorization:"Bearer ".concat(r)}});case 5:n(m.M.update({todoId:s,updatedTodo:a})),n(x.A.setIsLoading(!1)),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),n(x.A.showNotification({title:t.t0.message,message:t.t0.response.data.message,status:"error"}));case 12:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e){return t.apply(this,arguments)}}()}(a)),u(!1)}else r(x.A.showNotification({title:"Creating todo is failed",message:"You cannot add an empty todo",status:"error"}))},className:b.isUpdateOn__container,children:[(0,h.jsx)("input",{type:"text",placeholder:e.todo,ref:T,className:b.isUpdateOn__input}),(0,h.jsx)("button",{className:b.isUpdateOn__button_edit,children:"Okay"}),(0,h.jsx)("button",{onClick:function(){u(!1),k(!1)},type:"button",className:b.isUpdateOn__button_cancel,children:"Cancel"}),j&&(0,h.jsx)("p",{children:"You cannot add an empty todo!"})]})]})},Y=function(){var e=(0,v.v9)((function(e){return e.ui.isLoading})),t=(0,v.v9)((function(e){return e.todos.todos})),n=(0,v.v9)((function(e){return e.user.token})),a=(0,v.v9)((function(e){return e.user.userId})),r=(0,v.I0)(),c=(0,_.useCallback)((0,s.Z)((0,o.Z)().mark((function e(){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r(j({token:n,userId:a}));case 1:case"end":return e.stop()}}),e)}))),[r,n,a]);(0,_.useEffect)((function(){c()}),[r,n,a,c]);var i,d=function(e){r(function(e,t){return function(){var n=(0,s.Z)((0,o.Z)().mark((function n(s){return(0,o.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,s(x.A.setIsLoading(!0)),n.next=4,g.Z.delete("https://todoapp-backend-gx49.onrender.com/"+"api/todos/".concat(e),{headers:{Authorization:"Bearer ".concat(t)}});case 4:return n.next=6,s(m.M.delete(e));case 6:s(x.A.setIsLoading(!1)),n.next=12;break;case 9:n.prev=9,n.t0=n.catch(0),s(x.A.showNotification({title:n.t0.message,message:n.t0.response.data.message,status:"error"}));case 12:case"end":return n.stop()}}),n,null,[[0,9]])})));return function(e){return n.apply(this,arguments)}}()}(e,n))},u=t.map((function(e){return(0,h.jsx)(R,{onRemoveTodo:function(){return d(e.id)},id:e.id,todo:e.todo,important:e.important,creator:e.creator},e.id)}));return i=e||0!==u.length?e?(0,h.jsx)("h1",{className:I,children:"Loading..."}):u:(0,h.jsx)("h1",{className:I,children:"- there is nothing to do -"}),(0,h.jsx)("div",{className:N,children:i})},E=function(){var e=(0,v.v9)((function(e){return e.user.token})),t=(0,v.I0)(),n=(0,_.useRef)(),p=(0,_.useRef)(),m=(0,_.useState)(!1),g=(0,a.Z)(m,2),j=g[0],N=g[1],I=function(){var a=(0,s.Z)((0,o.Z)().mark((function s(a){var r;return(0,o.Z)().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:if(a.preventDefault(),""!==n.current.value){o.next=4;break}return t(x.A.showNotification({title:"Creating todo is failed",message:"You cannot add an empty todo",status:"error"})),o.abrupt("return");case 4:r={todo:n.current.value,important:p.current.checked,token:e},t(k(r)),n.current.value="",p.current.checked=!1,N(!1);case 9:case"end":return o.stop()}}),s)})));return function(e){return a.apply(this,arguments)}}();return(0,h.jsxs)("div",{className:r,children:[(0,h.jsx)(f,{children:(0,h.jsxs)("form",{className:c,onSubmit:I,children:[(0,h.jsx)("input",{name:"new todo",id:"new-todo",ref:n,className:d,maxLength:25}),(0,h.jsxs)("div",{className:i,children:[(0,h.jsx)("input",{type:"checkbox",name:"important",id:"important",ref:p,className:u,onClick:function(){N((function(e){return!j}))}}),(0,h.jsx)(L,{flagColor:j}),(0,h.jsx)("button",{className:l,children:"Add"})]})]})}),(0,h.jsx)(Y,{})]})},V="AddNewTodo_container__Du5t0",W=function(){return(0,h.jsx)("div",{className:V,children:(0,h.jsx)(E,{})})}}}]);
//# sourceMappingURL=362.5e1a4074.chunk.js.map