"use strict";(self.webpackChunkmyproject=self.webpackChunkmyproject||[]).push([[362],{362:function(t,e,n){n.r(e),n.d(e,{default:function(){return X}});var o=n(165),a=n(861),s=n(439),r="NewTodo_newTodo__container__kikHj",c="NewTodo_form__lt8p4",i="NewTodo_form__icon__container__fs59C",d="NewTodo_form__input__WQ5-i",u="NewTodo_form__important__p-8hH",l="NewTodo_form__button_submit__Jq5UG",_=n(791),p="Card_card__W2sh9",h=n(184),f=function(t){return(0,h.jsx)("div",{className:p,children:t.children})},v=n(434),m=n(505),x=n(885),g=n(243),j=function(t){return function(){var e=(0,a.Z)((0,o.Z)().mark((function e(n){var a,s,r,c;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.token,s=t.userId,e.prev=1,n(m.M.loading(!0)),e.next=5,g.Z.get("https://todoapp-backend-gx49.onrender.com/"+"api/todos/".concat(s),{headers:{Authorization:"Bearer ".concat(a)}});case 5:r=e.sent,c=r.data.todos,n(m.M.fetch(c)),n(m.M.loading(!1)),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),n(x.A.showNotification({title:e.t0.message,message:e.t0.response.data.message,status:"error"}));case 14:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t){return e.apply(this,arguments)}}()},k=function(t){return function(){var e=(0,a.Z)((0,o.Z)().mark((function e(n){var a,s,r,c,i,d;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.todo,s=t.important,r=t.token,e.prev=1,e.next=4,g.Z.post("https://todoapp-backend-gx49.onrender.com/api/todos",{todo:a,important:s},{headers:{Authorization:"Bearer ".concat(r)}});case 4:c=e.sent,i=c.data.todo,d={key:i._id,todo:i.todo,important:i.important,creator:i.creator,id:i._id},n(m.M.add(d)),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),n(x.A.showNotification({title:e.t0.message,message:e.t0.response.data.message,status:"error"}));case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t){return e.apply(this,arguments)}}()},N="Todos_container__todos__moyE0",b="Todos_h1__ujIgV",w={isUpdateOff__container:"TodoItem_isUpdateOff__container__TNfW7",isUpdateOff__todo:"TodoItem_isUpdateOff__todo__A84m5",isUpdateOff__todo_checked:"TodoItem_isUpdateOff__todo_checked__0hHYa",isUpdateOn__container:"TodoItem_isUpdateOn__container__XCmtO",isUpdateOn__input:"TodoItem_isUpdateOn__input__onYDz",isUpdateOn__button_edit:"TodoItem_isUpdateOn__button_edit__nOXmj",isUpdateOn__button_cancel:"TodoItem_isUpdateOn__button_cancel__Z0cmi"},I="EditIcon_label__p6l4t",M="EditIcon_editIcon__4kebv",U=function(t){return(0,h.jsx)("label",{onClick:t.updateHandler,className:I,children:(0,h.jsxs)("svg",{xmlns:"../../img/sprite.svg#icon-edit.svg",viewBox:"0 0 32 32",className:M,children:[(0,h.jsx)("title",{children:"Update"}),(0,h.jsx)("path",{d:"M27 0c2.761 0 5 2.239 5 5 0 1.126-0.372 2.164-1 3l-2 2-7-7 2-2c0.836-0.628 1.874-1 3-1zM2  23l-2 9 9-2 18.5-18.5-7-7-18.5 18.5zM22.362 11.362l-14 14-1.724-1.724 14-14 1.724 1.724z"})]})})},O="DeleteIcon_label__u-AB8",T="DeleteIcon_deleteIcon__Tx2Va",Z=function(t){return(0,h.jsx)("label",{onClick:t.deleteHandler,className:O,children:(0,h.jsxs)("svg",{xmlns:"../../img/sprite.svg#icon-delete.svg",className:T,viewBox:"0 0 32 32",children:[(0,h.jsx)("title",{children:"Delete"}),(0,h.jsx)("path",{d:"M4 10v20c0 1.1 0.9 2 2 2h18c1.1 0 2-0.9 2-2v-20h-22zM10  28h-2v-14h2v14zM14 28h-2v-14h2v14zM18 28h-2v-14h2v14zM22 28h-2v-14h2v14z"}),(0,h.jsx)("path",{d:"M26.5 4h-6.5v-2.5c0-0.825-0.675-1.5-1.5-1.5h-7c-0.825 0-1.5 0.675-1.5  1.5v2.5h-6.5c-0.825 0-1.5 0.675-1.5 1.5v2.5h26v-2.5c0-0.825-0.675-1.5-1.5-1.5zM18 4h-6v-1.975h6v1.975z"})]})})},C="FlagIcon_div__TPH1i",z="FlagIcon_flagIcon__4S4I9",B="FlagIcon_flagColored__xGTaJ",y="FlagIcon_isNotButton__HyO3l",A="FlagIcon_isNotButtonInvis__rfXqn",H=function(t){var e="".concat(z);return t.flagColor&&(e="".concat(B)),!0===t.isNotButton&&(e="".concat(y)),!0===t.isNotButtonInvis&&(e="".concat(A)),(0,h.jsxs)("div",{className:C,children:[!t.isNotButton&&(0,h.jsx)("label",{htmlFor:"important",children:(0,h.jsxs)("svg",{xmlns:"../../img/sprite.svg#icon-flag.svg",viewBox:"0 0 32 32",className:"".concat(e),children:[(0,h.jsx)("title",{children:"Mark as important"}),(0,h.jsx)("path",{d:"M0 0h4v32h-4v-32z"}),(0,h.jsx)("path",{d:"M26 20.094c2.582 0 4.83-0.625 6-1.547v-16c-1.17 0.922-3.418 1.547-6 1.547s-4.83-0.625-6-1.547v16c1.17 0.922 3.418 1.547 6 1.547z"}),(0,h.jsx)("path",{d:"M19 1.016c-1.466-0.623-3.61-1.016-6-1.016-3.012 0-5.635 0.625-7 1.547v16c1.365-0.922 3.988-1.547 7-1.547 2.39 0 4.534 0.393 6 1.016v-16z"})]})}),t.isNotButton&&(0,h.jsxs)("svg",{xmlns:"../../img/sprite.svg#icon-flag.svg",viewBox:"0 0 32 32",className:"".concat(e),children:[(0,h.jsx)("title",{children:"important"}),(0,h.jsx)("path",{d:"M0 0h4v32h-4v-32z"}),(0,h.jsx)("path",{d:"M26 20.094c2.582 0 4.83-0.625 6-1.547v-16c-1.17 0.922-3.418 1.547-6 1.547s-4.83-0.625-6-1.547v16c1.17 0.922 3.418 1.547 6 1.547z"}),(0,h.jsx)("path",{d:"M19 1.016c-1.466-0.623-3.61-1.016-6-1.016-3.012 0-5.635 0.625-7 1.547v16c1.365-0.922 3.988-1.547 7-1.547 2.39 0 4.534 0.393 6 1.016v-16z"})]})]})},D="CheckBoxU_label__f+j74",S="CheckBoxU_editIcon__V+se4",F="CheckBoxU_editIconChecked__+x+vr",R=function(t){var e;return t.isChecked||(e=(0,h.jsx)("svg",{xmlns:"../../img/sprite.svg#icon-checkbox-unchecked.svg",viewBox:"0 0 32 32",className:S,children:(0,h.jsx)("path",{d:"M28 0h-24c-2.2 0-4 1.8-4 4v24c0 2.2 1.8 4 4 4h24c2.2 0 4-1.8 4-4v-24c0-2.2-1.8-4-4-4zM28 28h-24v-24h24v24z"})})),t.isChecked&&(e=(0,h.jsxs)("svg",{xmlns:"../../img/sprite.svg#icon-checkbox-checked.svg",viewBox:"0 0 32 32",className:F,children:[(0,h.jsx)("title",{children:"Mark as unchecked"}),(0,h.jsx)("path",{d:"M28 0h-24c-2.2 0-4 1.8-4 4v24c0 2.2 1.8 4 4 4h24c2.2 0 4-1.8 4-4v-24c0-2.2-1.8-4-4-4zM14  24.828l-7.414-7.414 2.828-2.828 4.586 4.586 9.586-9.586 2.828 2.828-12.414 12.414z"})]})),(0,h.jsx)("label",{onClick:t.onCheck,className:D,children:e})},Y=function(t){var e,n=(0,v.v9)((function(t){return t.user.token})),r=(0,v.I0)(),c=(0,_.useState)(!1),i=(0,s.Z)(c,2),d=i[0],u=i[1],l=(0,_.useState)(!1),p=(0,s.Z)(l,2),j=p[0],k=p[1],N=(0,_.useState)(!1),b=(0,s.Z)(N,2),I=b[0],M=b[1],O=(0,_.useRef)();return e="".concat(I?w.isUpdateOff__todo_checked:w.isUpdateOff__todo),(0,h.jsxs)(f,{children:[!d&&(0,h.jsxs)("div",{className:w.isUpdateOff__container,children:[(0,h.jsx)(R,{onCheck:function(){M((function(t){return!I}))},isChecked:I}),t.important&&(0,h.jsx)(H,{isNotButton:!0}),!t.important&&(0,h.jsx)(H,{isNotButtonInvis:!0}),(0,h.jsx)("h1",{className:e,children:t.todo}),(0,h.jsx)(U,{updateHandler:function(){u(!0)},className:w.isUpdateOff__button_edit}),(0,h.jsx)(Z,{deleteHandler:t.onRemoveTodo,className:w.isUpdateOff__button_delete})]}),d&&(0,h.jsxs)("form",{onSubmit:function(e){if(e.preventDefault(),""!==O.current.value){var s={token:n,todoId:t.id,updatedTodo:O.current.value};r(function(t){return function(){var e=(0,a.Z)((0,o.Z)().mark((function e(n){var a,s,r;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.todoId,s=t.updatedTodo,r=t.token,e.prev=1,e.next=4,g.Z.patch("https://todoapp-backend-gx49.onrender.com/"+"api/todos/".concat(a),{todoId:a,updatedTodo:s},{headers:{Authorization:"Bearer ".concat(r)}});case 4:return e.next=6,n(m.M.update({todoId:a,updatedTodo:s}));case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),n(x.A.showNotification({title:e.t0.message,message:e.t0.response.data.message,status:"error"}));case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}()}(s)),u(!1)}else r(x.A.showNotification({title:"Creating todo is failed",message:"You cannot add an empty todo",status:"error"}))},className:w.isUpdateOn__container,children:[(0,h.jsx)("input",{type:"text",placeholder:t.todo,ref:O,className:w.isUpdateOn__input}),(0,h.jsx)("button",{className:w.isUpdateOn__button_edit,children:"Okay"}),(0,h.jsx)("button",{onClick:function(){u(!1),k(!1)},type:"button",className:w.isUpdateOn__button_cancel,children:"Cancel"}),j&&(0,h.jsx)("p",{children:"You cannot add an empty todo!"})]})]})},E=function(){var t=(0,v.v9)((function(t){return t.todos.isLoading})),e=(0,v.v9)((function(t){return t.todos.todos})),n=(0,v.v9)((function(t){return t.user.token})),s=(0,v.v9)((function(t){return t.user.userId})),r=(0,v.I0)(),c=(0,_.useCallback)((0,a.Z)((0,o.Z)().mark((function t(){return(0,o.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r(j({token:n,userId:s}));case 1:case"end":return t.stop()}}),t)}))),[r,n,s]);(0,_.useEffect)((function(){c()}),[r,n,s,c]);var i,d=function(t){r(function(t,e){return function(){var n=(0,a.Z)((0,o.Z)().mark((function n(a){return(0,o.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,g.Z.delete("https://todoapp-backend-gx49.onrender.com/"+"api/todos/".concat(t),{headers:{Authorization:"Bearer ".concat(e)}});case 3:return n.next=5,a(m.M.delete(t));case 5:n.next=10;break;case 7:n.prev=7,n.t0=n.catch(0),a(x.A.showNotification({title:n.t0.message,message:n.t0.response.data.message,status:"error"}));case 10:case"end":return n.stop()}}),n,null,[[0,7]])})));return function(t){return n.apply(this,arguments)}}()}(t,n))},u=e.map((function(t){return(0,h.jsx)(Y,{onRemoveTodo:function(){return d(t.id)},id:t.id,todo:t.todo,important:t.important,creator:t.creator},t.id)}));return i=t||0!==u.length?u:(0,h.jsx)("h1",{className:b,children:"- there is nothing to do -"}),(0,h.jsx)("div",{className:N,children:i})},V=function(){var t=(0,v.v9)((function(t){return t.user.token})),e=(0,v.I0)(),n=(0,_.useRef)(),p=(0,_.useRef)(),m=(0,_.useState)(!1),g=(0,s.Z)(m,2),j=g[0],N=g[1],b=function(){var s=(0,a.Z)((0,o.Z)().mark((function a(s){var r;return(0,o.Z)().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:if(s.preventDefault(),""!==n.current.value){o.next=4;break}return e(x.A.showNotification({title:"Creating todo is failed",message:"You cannot add an empty todo",status:"error"})),o.abrupt("return");case 4:r={todo:n.current.value,important:p.current.checked,token:t},e(k(r)),n.current.value="",p.current.checked=!1,N(!1);case 9:case"end":return o.stop()}}),a)})));return function(t){return s.apply(this,arguments)}}();return(0,h.jsxs)("div",{className:r,children:[(0,h.jsx)(f,{children:(0,h.jsxs)("form",{className:c,onSubmit:b,children:[(0,h.jsx)("input",{name:"new todo",id:"new-todo",ref:n,className:d,maxLength:25}),(0,h.jsxs)("div",{className:i,children:[(0,h.jsx)("input",{type:"checkbox",name:"important",id:"important",ref:p,className:u,onClick:function(){N((function(t){return!j}))}}),(0,h.jsx)(H,{flagColor:j}),(0,h.jsx)("button",{className:l,children:"Add"})]})]})}),(0,h.jsx)(E,{})]})},W="AddNewTodo_container__Du5t0",X=function(){return(0,h.jsx)("div",{className:W,children:(0,h.jsx)(V,{})})}}}]);
//# sourceMappingURL=362.b4970272.chunk.js.map